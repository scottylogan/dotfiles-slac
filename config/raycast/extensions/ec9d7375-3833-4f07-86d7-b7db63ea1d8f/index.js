"use strict";var d=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var D=(t,n)=>{for(var e in n)d(t,e,{get:n[e],enumerable:!0})},I=(t,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of B(n))!N.call(t,a)&&a!==e&&d(t,a,{get:()=>n[a],enumerable:!(o=S(n,a))||o.enumerable});return t};var T=t=>I(d({},"__esModule",{value:!0}),t);var w={};D(w,{default:()=>P});module.exports=T(w);var F=require("react"),r=require("@raycast/api");var b=class{constructor(n){this.sign=0;this.exponent=0;this.mantissa="0";this.floatBinary="";this.fixedBinary=n,this.setSign(),this.setExponentAndMantissa(),this.setFloatBinary()}getMantissa(){return this.mantissa}getExponent(){return this.exponent}getSign(){return this.sign}getFloatBinary(){return this.floatBinary}},p=class extends b{constructor(n){super(n)}setExponentAndMantissa(){let{delta:n,mantissa:e}=h(this.fixedBinary);this.exponent=n+127,this.mantissa=e}getMantissa(){return this.mantissa}setSign(){console.log(this.fixedBinary[0]),this.fixedBinary[0]==="-"?this.sign=1:this.sign=0}setFloatBinary(){this.mantissa.length>23&&(this.mantissa=this.mantissa.slice(0,23)),this.floatBinary=this.sign.toString()+" "+this.exponent.toString(2)+"0".repeat(8-this.exponent.toString(2).length)+" "+this.mantissa+"0".repeat(23-this.mantissa.length)}getFloatDecimal(){let n=0;for(let e=0;e<this.mantissa.length;e++)n+=parseInt(this.mantissa[e])*Math.pow(2,-1*(e+1));return n+=1,n*=Math.pow(2,this.exponent-127),this.sign===1&&(n*=-1),n.toString()}},u=class extends b{getFloatDecimal(){let n=0;for(let e=0;e<this.mantissa.length;e++)n+=parseInt(this.mantissa[e])*Math.pow(2,-1*(e+1));return n+=1,n*=Math.pow(2,this.exponent-1023),this.sign===1&&(n*=-1),n.toString()}constructor(n){super(n)}setExponentAndMantissa(){let{delta:n,mantissa:e}=h(this.fixedBinary);this.exponent=n+1023,this.mantissa=e}getMantissa(){return this.mantissa}setSign(){this.fixedBinary[0]==="-"?this.sign=1:this.sign=0}setFloatBinary(){this.mantissa.length>52&&(this.mantissa=this.mantissa.slice(0,52)),this.floatBinary=this.sign.toString()+" "+this.exponent.toString(2)+"0".repeat(11-this.exponent.toString(2).length)+" "+this.mantissa+"0".repeat(52-this.mantissa.length)}};function h(t){t=t.replace("-",""),t=t.replace("+",""),t=t.replace(",",".");let n=t.split(""),e=n.indexOf("."),o=NaN,a=NaN;n=n.filter(function(g){return g!=","}),console.log(n);for(let g=0;g<n.length;g++)if(n[g]==="1"){o=g;break}console.log("closest one index: "+o),console.log("comma index: "+e);let c=e-o,s;return console.log(c),isNaN(a)?s=n.slice(o+1).join("").replace(",","").replace(".",""):s=n.slice(a+1).join("").replace(",","").replace(".",""),{delta:c,mantissa:s}}function f(t){return t.slice(0,1)=="-"?"-":""}function v(t,n){let e=new p(t),o=new u(t),a=e.getFloatDecimal(),c=o.getFloatDecimal(),s=t.includes(",")?t.split(","):t.split("."),g=t.slice(0,1)+parseInt(s[0],2)+parseInt(s[1],2)/2**s[1].length;n({inputType:"Binary with comma",binNumber:t,decNumber:g.toString(),hexNumber:"",binFloat:{singlePrecision:{sign:e.getSign().toString(),exponent:e.getExponent().toString(),mantissa:e.getMantissa().toString(),floatingPoint:e.getFloatBinary().toString(),floatDecimal:a.toString()},doublePrecision:{sign:o.getSign().toString(),exponent:o.getExponent().toString(),mantissa:o.getMantissa().toString(),floatingPoint:o.getFloatBinary().toString(),floatDecimal:c.toString()}}})}function M(t,n){let e=t.includes(",")?t.split(","):t.split("."),o=parseInt(e[0]).toString(2),a="",c="0."+e[1],s=parseFloat(c);for(let x=0;x<64&&s!=0;x++)s>=1?(a+="1",s--):a+="0",s*=2;let g=f(t)+o+"."+a.slice(1),l=new p(g),m=new u(g);n({inputType:"Decimal with comma",binNumber:f(t)=="-"?g.slice(0,10):g.slice(0,9),decNumber:t,hexNumber:"",binFloat:{singlePrecision:{sign:l.getSign().toString(),exponent:l.getExponent().toString(),mantissa:l.getMantissa().toString(),floatingPoint:l.getFloatBinary().toString(),floatDecimal:l.getFloatDecimal()},doublePrecision:{sign:m.getSign().toString(),exponent:m.getExponent().toString(),mantissa:m.getMantissa().toString(),floatingPoint:m.getFloatBinary().toString(),floatDecimal:m.getFloatDecimal()}}})}function y(t,n){if(t=t.replaceAll(" ",""),console.log(t),t.replace("-","").slice(2).match(/^-?[0-1]+[,.][0-1]+$/)&&t.replace("-","").slice(0,2)=="0b")console.log("Binary comma"),v(t,n);else if(t.match(/^-?[0-9]+[.,][0-9]+$/))M(t,n);else{let e=t.split(/([+*/%^-])/),o=[];for(let s=0;s<e.length;s++)e[s]!=""&&!e[s].match(/([+*/%^-])/)?o.push(A(e[s])):o.push(e[s]);console.log(o);let a=o[0],c=[a.type];for(let s=1;s<o.length;s+=2){let g=o[s],l=o[s+1];if(l.number==null||a.number==null)break;switch(c.push(g),g){case"+":a.number+=l.number,c.push(l.type);break;case"-":a.number-=l.number,c.push(l.type);break;case"*":a.number*=l.number,c.push(l.type);break;case"/":a.number/=l.number,c.push(l.type);break;case"%":a.number%=l.number,c.push(l.type);break;case"^":a.number**=l.number,c.push(l.type);break;default:break}}a.number==null&&(a={number:0,type:""}),n({inputType:c.toString().replaceAll(","," ")??"",binNumber:a.number.toString(2),decNumber:a.number.toString(),hexNumber:a.number.toString(16),binFloat:void 0})}}function A(t){let n={"0b":{radix:2,type:"Binary"},"0x":{radix:16,type:"Hexadecimal"},"0o":{radix:8,type:"Octal"}},e=10,o="Decimal";return t.slice(0,2)in n&&(e=n[t.slice(0,2)].radix,o=n[t.slice(0,2)].type,t=t.slice(2)),{number:parseInt(t,e),type:o}}var i=require("react/jsx-runtime");function P(){let[t,n]=(0,F.useState)({binNumber:"",decNumber:"",hexNumber:"",binFloat:void 0,inputType:""});function e({content:s}){return(0,i.jsxs)(r.ActionPanel,{children:[(0,i.jsx)(r.Action.CopyToClipboard,{content:s}),(0,i.jsx)(r.Action.Paste,{content:s})]})}let o=[(0,i.jsx)(r.List.Item,{title:"Detected Input",accessories:[{text:t.inputType}]}),(0,i.jsx)(r.List.Item,{title:"Binary Representation",accessories:[{text:t.binNumber}],actions:(0,i.jsx)(e,{content:t.binNumber})}),(0,i.jsx)(r.List.Item,{title:"Decimal Representation",accessories:[{text:t.decNumber}],actions:(0,i.jsx)(e,{content:t.decNumber})}),(0,i.jsx)(r.List.Item,{title:"Hexadecimal Representation",accessories:[{text:t.hexNumber}],actions:(0,i.jsx)(e,{content:t.hexNumber})})],a=[(0,i.jsx)(r.List.Item,{title:"Detected Input",accessories:[{text:t.inputType}]}),(0,i.jsx)(r.List.Item,{title:"Fixed Point Binary Representation",accessories:[{text:t.binNumber}],actions:(0,i.jsx)(e,{content:t.binNumber})}),(0,i.jsx)(r.List.Item,{title:"Fixed Point Decimal Representation",accessories:[{text:t.decNumber}],actions:(0,i.jsx)(e,{content:t.decNumber})}),(0,i.jsxs)(r.List.Section,{title:"Floating Point Binary Representation \u2014 Single Precision",children:[(0,i.jsx)(r.List.Item,{title:"Sign",accessories:[{text:t.binFloat?.singlePrecision.sign}],actions:(0,i.jsx)(e,{content:t.binFloat?.singlePrecision.sign??""})}),(0,i.jsx)(r.List.Item,{title:"Exponent",accessories:[{text:t.binFloat?.singlePrecision.exponent}],actions:(0,i.jsx)(e,{content:t.binFloat?.singlePrecision.exponent??""})}),(0,i.jsx)(r.List.Item,{title:"Mantissa",accessories:[{text:t.binFloat?.singlePrecision.mantissa}],actions:(0,i.jsx)(e,{content:t.binFloat?.singlePrecision.mantissa??""})}),(0,i.jsx)(r.List.Item,{title:"Floating Point",accessories:[{text:t.binFloat?.singlePrecision.floatingPoint}],actions:(0,i.jsx)(e,{content:t.binFloat?.singlePrecision.floatingPoint??""})}),(0,i.jsx)(r.List.Item,{title:"Floating Point Decimal",accessories:[{text:t.binFloat?.singlePrecision.floatDecimal}],actions:(0,i.jsx)(e,{content:t.binFloat?.singlePrecision.floatDecimal??""})})]}),(0,i.jsxs)(r.List.Section,{title:"Floating Point Binary Representation \u2014 Double Precision",children:[(0,i.jsx)(r.List.Item,{title:"Sign",accessories:[{text:t.binFloat?.doublePrecision.sign}],actions:(0,i.jsx)(e,{content:t.binFloat?.doublePrecision.sign??""})}),(0,i.jsx)(r.List.Item,{title:"Exponent",accessories:[{text:t.binFloat?.doublePrecision.exponent}],actions:(0,i.jsx)(e,{content:t.binFloat?.doublePrecision.exponent??""})}),(0,i.jsx)(r.List.Item,{title:"Mantissa",accessories:[{text:t.binFloat?.doublePrecision.mantissa}],actions:(0,i.jsx)(e,{content:t.binFloat?.doublePrecision.mantissa??""})}),(0,i.jsx)(r.List.Item,{title:"Floating Point",accessories:[{text:t.binFloat?.doublePrecision.floatingPoint}],actions:(0,i.jsx)(e,{content:t.binFloat?.doublePrecision.floatingPoint??""})}),(0,i.jsx)(r.List.Item,{title:"Floating Point Decimal",accessories:[{text:t.binFloat?.doublePrecision.floatDecimal}],actions:(0,i.jsx)(e,{content:t.binFloat?.doublePrecision.floatDecimal??""})})]})],c=t.inputType==="Binary with comma"||t.inputType==="Decimal with comma";return(0,i.jsx)(r.List,{isLoading:!t.inputType,searchBarPlaceholder:"Enter your calculation: 0b0101+0xff...",onSearchTextChange:async s=>{y(s,n)},children:c?a.map(s=>s):o.map(s=>s)})}
